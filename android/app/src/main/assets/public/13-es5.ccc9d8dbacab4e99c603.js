!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"28dC":function(r,n,a){"use strict";a.r(n),a.d(n,"DataManagementPageModule",function(){return T});var s,i,c,o=a("ofXK"),u=a("3Pt+"),l=a("TEn/"),b=a("tyNb"),h=a("mrSG"),p=a("fXoL"),f=a("8znc"),d=a("/Xhy"),S=a("sYmb"),m=[{path:"",component:(s=function(){function r(t,n,a,s,i){e(this,r),this.alertController=t,this.storageService=n,this.themeService=a,this.translateService=s,this.platform=i}var n,a,s;return n=r,(a=[{key:"ngOnInit",value:function(){}},{key:"backup",value:function(){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.platform.ready().then(function(){t.platform.is("android")?t.storageService.backupAllDataAndroid():t.platform.is("mobileweb")&&t.backupWeb()});case 1:case"end":return e.stop()}},e,this)}))}},{key:"backupWeb",value:function(){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},this.translateService.get("GENERAL.CANCEL").subscribe(function(e){t.cancel=e}),this.translateService.get("TABS.SETTINGS.BACKUP").subscribe(function(e){t.header=e}),this.translateService.get("TABS.SETTINGS.COPY_TO_CLIPBOARD").subscribe(function(e){t.copyToClipboard=e}),e.t0=this.alertController,e.t1=t.header,e.next=6,this.storageService.getAllData();case 6:return e.t2=e.sent,e.t3=[{text:t.cancel,role:"cancel",cssClass:"secondary"},{text:t.copyToClipboard,cssClass:"secondary",handler:function(){return Object(h.a)(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.storageService.getAllData();case 3:e.t1=e.sent,e.t0.copyTextToClipboard.call(e.t0,e.t1);case 5:case"end":return e.stop()}},e,this)}))}}],e.t4={cssClass:"alert-full-width",header:e.t1,message:e.t2,buttons:e.t3},e.next=11,e.t0.create.call(e.t0,e.t4);case 11:return r=e.sent,e.next=14,r.present();case 14:case"end":return e.stop()}},e,this)}))}},{key:"restore",value:function(){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.platform.ready().then(function(){t.platform.is("android")?t.restoreAndroid():t.platform.is("mobileweb")&&t.restoreWeb()});case 1:case"end":return e.stop()}},e,this)}))}},{key:"restoreAndroid",value:function(){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},this.translateService.get("TABS.SETTINGS.RESTORE").subscribe(function(e){t.header=e}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_ALERT_MESSAGE").subscribe(function(e){t.message=e}),this.translateService.get("GENERAL.CANCEL").subscribe(function(e){t.cancel=e}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_REPLACE").subscribe(function(e){t.restoreBackupReplace=e}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_MERGE").subscribe(function(e){t.restoreBackupMerge=e}),e.next=4,this.alertController.create({cssClass:"alert-full-width",header:t.header,message:t.message,buttons:[{text:t.cancel,role:"cancel",cssClass:"secondary"},{text:t.restoreBackupReplace,handler:function(){n.storageService.restoreAllDataAndroid().then(function(){n.themeService.applyTheme()})}},{text:t.restoreBackupMerge,handler:function(){n.storageService.restoreAllDataAndroid(!0).then(function(){n.themeService.applyTheme()})}}]});case 4:return r=e.sent,e.next=7,r.present();case 7:case"end":return e.stop()}},e,this)}))}},{key:"restoreWeb",value:function(){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},this.translateService.get("TABS.SETTINGS.RESTORE").subscribe(function(e){t.header=e}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_ALERT_MESSAGE").subscribe(function(e){t.message=e}),this.translateService.get("GENERAL.CANCEL").subscribe(function(e){t.cancel=e}),this.translateService.get("TABS.SETTINGS.BACKUP_DATA").subscribe(function(e){t.backupData=e}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_REPLACE").subscribe(function(e){t.restoreBackupReplace=e}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_MERGE").subscribe(function(e){t.restoreBackupMerge=e}),e.next=4,this.alertController.create({cssClass:"alert-full-width",header:t.header,message:t.message,inputs:[{name:"restore",type:"textarea",placeholder:t.backupData}],buttons:[{text:t.cancel,role:"cancel",cssClass:"secondary"},{text:t.restoreBackupReplace,cssClass:"secondary",handler:function(e){return Object(h.a)(n,void 0,void 0,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.restoreAllData(e.restore).then(function(){r.themeService.applyTheme()});case 2:case"end":return t.stop()}},t,this)}))}},{text:t.restoreBackupMerge,cssClass:"secondary",handler:function(e){return Object(h.a)(n,void 0,void 0,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storageService.restoreAllData(e.restore,!0).then(function(){r.themeService.applyTheme()});case 2:case"end":return t.stop()}},t,this)}))}}]});case 4:return r=e.sent,e.next=7,r.present();case 7:case"end":return e.stop()}},e,this)}))}},{key:"copyTextToClipboard",value:function(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}])&&t(n.prototype,a),s&&t(n,s),r}(),s.\u0275fac=function(e){return new(e||s)(p.Jb(l.a),p.Jb(f.a),p.Jb(d.a),p.Jb(S.d),p.Jb(l.L))},s.\u0275cmp=p.Db({type:s,selectors:[["app-data-management"]],decls:20,vars:9,consts:[["slot","start"],["routerLink",".."],["slot","icon-only","name","arrow-back"],["button","",3,"click"],["slot","start","name","archive"],["slot","start","name","refresh"]],template:function(e,t){1&e&&(p.Ob(0,"ion-header"),p.Ob(1,"ion-toolbar"),p.Ob(2,"ion-buttons",0),p.Ob(3,"ion-button",1),p.Kb(4,"ion-icon",2),p.Nb(),p.Nb(),p.Ob(5,"ion-title"),p.pc(6),p.Zb(7,"translate"),p.Nb(),p.Nb(),p.Nb(),p.Ob(8,"ion-content"),p.Ob(9,"ion-list"),p.Ob(10,"ion-item",3),p.Wb("click",function(){return t.backup()}),p.Kb(11,"ion-icon",4),p.Ob(12,"ion-label"),p.pc(13),p.Zb(14,"translate"),p.Nb(),p.Nb(),p.Ob(15,"ion-item",3),p.Wb("click",function(){return t.restore()}),p.Kb(16,"ion-icon",5),p.Ob(17,"ion-label"),p.pc(18),p.Zb(19,"translate"),p.Nb(),p.Nb(),p.Nb(),p.Nb()),2&e&&(p.zb(6),p.qc(p.ac(7,3,"TABS.SETTINGS.DATA_MANAGEMENT")),p.zb(7),p.qc(p.ac(14,5,"TABS.SETTINGS.BACKUP")),p.zb(5),p.qc(p.ac(19,7,"TABS.SETTINGS.RESTORE")))},directives:[l.o,l.G,l.e,l.d,l.M,b.i,l.p,l.F,l.k,l.t,l.r,l.s],pipes:[S.c],styles:[""]}),s)}],v=((c=function t(){e(this,t)}).\u0275fac=function(e){return new(e||c)},c.\u0275mod=p.Hb({type:c}),c.\u0275inj=p.Gb({imports:[[b.j.forChild(m)],b.j]}),c),T=((i=function t(){e(this,t)}).\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.Hb({type:i}),i.\u0275inj=p.Gb({imports:[[o.b,u.d,l.H,v,S.b]]}),i)}}])}();