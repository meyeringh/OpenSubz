(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{jEZj:function(e,t,i){"use strict";i.r(t),i.d(t,"TabSettingsPageModule",(function(){return g}));var r=i("TEn/"),s=i("ofXK"),o=i("tyNb"),n=i("mrSG");const a=["\u20ac","$","\xa5","\xa3","\u20a4","\u20a1","\u20a6","\u20b9","\u20a9","\u20aa","\u20ab","\u20ad","\u20ae","\u20b1","\u20b2","\u20b4","\u20b5","\u20b8","\u20ba","\u20bc","\u20be","DKK"];var c=i("h19s"),b=i("fXoL"),l=i("3Pt+"),h=i("8znc"),S=i("/Xhy"),T=i("sYmb"),u=i("C6fG"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(n.b)(t,e),t.prototype.getAppName=function(){return Object(u.cordova)(this,"getAppName",{},arguments)},t.prototype.getPackageName=function(){return Object(u.cordova)(this,"getPackageName",{},arguments)},t.prototype.getVersionCode=function(){return Object(u.cordova)(this,"getVersionCode",{},arguments)},t.prototype.getVersionNumber=function(){return Object(u.cordova)(this,"getVersionNumber",{},arguments)},t.pluginName="AppVersion",t.plugin="cordova-plugin-app-version",t.pluginRef="cordova.getAppVersion",t.repo="https://github.com/whiteoctober/cordova-plugin-app-version",t.platforms=["Android","iOS","Windows"],t.\u0275fac=function(e){return i(e||t)},t.\u0275prov=b.Db({token:t,factory:function(e){return t.\u0275fac(e)}});var i=b.Ob(t);return t}(u.IonicNativePlugin);function E(e,t){if(1&e&&(b.Kb(0),b.Mb(1,"ion-select-option",11),b.mc(2),b.Lb(),b.Jb()),2&e){const e=t.$implicit;b.xb(1),b.dc("value",e),b.xb(1),b.nc(e)}}function p(e,t){if(1&e&&(b.Kb(0),b.Mb(1,"ion-select-option",11),b.mc(2),b.Lb(),b.Jb()),2&e){const e=t.$implicit;b.xb(1),b.dc("value",e),b.xb(1),b.nc(e)}}const A=[{path:"",component:(()=>{class e{constructor(e,t,i,r,s,o,n,b){this.alertController=e,this.formBuilder=t,this.storageService=i,this.themeService=r,this.translateService=s,this.platform=o,this.appVersion=n,this.router=b,this.currencyList=a,this.dateFormatList=c.a,this.settingsForm=this.formBuilder.group({forceDarkMode:!1,currency:this.currencyList[0],dateFormat:this.dateFormatList[0],notificationBeforeCancelationPeriodInDays:null})}ionViewWillEnter(){this.retrieveSettingsFromStorage().then(()=>{this.listenForSettingsFormChanges()})}ionViewWillLeave(){this.settingsFormChangeSubscription.unsubscribe()}showLicense(){return Object(n.a)(this,void 0,void 0,(function*(){const e={ok:"",header:""};this.translateService.get("GENERAL.OK").subscribe(t=>{e.ok=t}),this.translateService.get("TABS.SETTINGS.LICENSE").subscribe(t=>{e.header=t}),this.showAlertHelper(e.header,"MIT",'Copyright 2020 Christian Fla\xdfkamp\n<br><br>\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n<br><br>\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n<br><br>\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.',e.ok)}))}showAbout(){return Object(n.a)(this,void 0,void 0,(function*(){let e="",t="",i="",r="",s="";this.translateService.get("GENERAL.OK").subscribe(t=>{e=t}),this.translateService.get("TABS.SETTINGS.ABOUT").subscribe(e=>{t=e}),this.translateService.get("APP.NAME").subscribe(e=>{t+=" "+e}),this.translateService.get("TABS.SETTINGS.ABOUT_VERSION").subscribe(e=>{r=e}),this.translateService.get("APP.SHORT_DESCRIPTION").subscribe(e=>{s+="<p>"+e+"</p>"}),this.translateService.get("TABS.SETTINGS.ABOUT_AUTHOR").subscribe(e=>{i+="<h4>"+e+"</h4> Christian Fla\xdfkamp"}),this.translateService.get("TABS.SETTINGS.ABOUT_SOURCECODE").subscribe(e=>{i+="<h4>"+e+'</h4> <a href="https://codeberg.org/epinez/Subz">https://codeberg.org/epinez/Subz</a>'}),this.translateService.get("TABS.SETTINGS.ABOUT_REPORT_ISSUES").subscribe(e=>{i+="<h4>"+e+'</h4> <a href="https://codeberg.org/epinez/Subz/issues">https://codeberg.org/epinez/Subz/issues</a>'}),this.translateService.get("TABS.SETTINGS.ABOUT_CONTACT").subscribe(e=>{i+="<h4>"+e+'</h4> <a href="mailto:subz@flasskamp.com">subz@flasskamp.com</a>'}),this.platform.ready().then(()=>{this.platform.is("android")?this.appVersion.getVersionNumber().then(e=>{i=s+"<h4>"+r+"</h4> v"+e+i}).then(()=>{this.showAlertHelper(t,null,i,e)}):(i=s+i,this.showAlertHelper(t,null,i,e))})}))}showAlertHelper(e,t,i,r){return Object(n.a)(this,void 0,void 0,(function*(){const s=yield this.alertController.create({cssClass:"alert-full-width",header:e,subHeader:t,message:i,buttons:[{text:r}]});yield s.present()}))}listenForSettingsFormChanges(){this.settingsFormChangeSubscription=this.settingsForm.valueChanges.subscribe(()=>{this.saveSettingsToStorage()})}saveSettingsToStorage(){return Object(n.a)(this,void 0,void 0,(function*(){if(this.settingsForm.valid){const e=Object.assign(this.retrievedSettings,this.settingsForm.value);this.storageService.saveSettingsToStorage(e).then(()=>{this.themeService.applyTheme()})}}))}retrieveSettingsFromStorage(){return Object(n.a)(this,void 0,void 0,(function*(){this.retrievedSettings=yield this.storageService.retrieveSettingsFromStorage(),Object.keys(this.settingsForm.controls).forEach(e=>{this.retrievedSettings.hasOwnProperty(e)&&this.settingsForm.patchValue({[e]:this.retrievedSettings[e]})})}))}backup(){return Object(n.a)(this,void 0,void 0,(function*(){this.platform.ready().then(()=>{this.platform.is("android")?this.storageService.backupAllDataAndroid():this.platform.is("mobileweb")&&this.backupWeb()})}))}backupWeb(){return Object(n.a)(this,void 0,void 0,(function*(){const e={};this.translateService.get("GENERAL.CANCEL").subscribe(t=>{e.cancel=t}),this.translateService.get("TABS.SETTINGS.BACKUP").subscribe(t=>{e.header=t}),this.translateService.get("TABS.SETTINGS.COPY_TO_CLIPBOARD").subscribe(t=>{e.copyToClipboard=t});const t=yield this.alertController.create({cssClass:"alert-full-width",header:e.header,message:yield this.storageService.getAllData(),buttons:[{text:e.cancel,role:"cancel",cssClass:"secondary"},{text:e.copyToClipboard,cssClass:"secondary",handler:()=>Object(n.a)(this,void 0,void 0,(function*(){this.copyTextToClipboard(yield this.storageService.getAllData())}))}]});yield t.present()}))}restore(){return Object(n.a)(this,void 0,void 0,(function*(){this.platform.ready().then(()=>{this.platform.is("android")?this.restoreAndroid():this.platform.is("mobileweb")&&this.restoreWeb()})}))}restoreAndroid(){return Object(n.a)(this,void 0,void 0,(function*(){const e={};this.translateService.get("TABS.SETTINGS.RESTORE").subscribe(t=>{e.header=t}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_ALERT_MESSAGE").subscribe(t=>{e.message=t}),this.translateService.get("GENERAL.CANCEL").subscribe(t=>{e.cancel=t}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_REPLACE").subscribe(t=>{e.restoreBackupReplace=t}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_MERGE").subscribe(t=>{e.restoreBackupMerge=t});const t=yield this.alertController.create({cssClass:"alert-full-width",header:e.header,message:e.message,buttons:[{text:e.cancel,role:"cancel",cssClass:"secondary"},{text:e.restoreBackupReplace,handler:()=>{this.storageService.restoreAllDataAndroid().then(()=>{this.ionViewWillEnter(),this.themeService.applyTheme()})}},{text:e.restoreBackupMerge,handler:()=>{this.storageService.restoreAllDataAndroid(!0).then(()=>{this.ionViewWillEnter(),this.themeService.applyTheme()})}}]});yield t.present()}))}restoreWeb(){return Object(n.a)(this,void 0,void 0,(function*(){const e={};this.translateService.get("TABS.SETTINGS.RESTORE").subscribe(t=>{e.header=t}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_ALERT_MESSAGE").subscribe(t=>{e.message=t}),this.translateService.get("GENERAL.CANCEL").subscribe(t=>{e.cancel=t}),this.translateService.get("TABS.SETTINGS.BACKUP_DATA").subscribe(t=>{e.backupData=t}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_REPLACE").subscribe(t=>{e.restoreBackupReplace=t}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_MERGE").subscribe(t=>{e.restoreBackupMerge=t});const t=yield this.alertController.create({cssClass:"alert-full-width",header:e.header,message:e.message,inputs:[{name:"restore",type:"textarea",placeholder:e.backupData}],buttons:[{text:e.cancel,role:"cancel",cssClass:"secondary"},{text:e.restoreBackupReplace,cssClass:"secondary",handler:e=>Object(n.a)(this,void 0,void 0,(function*(){yield this.storageService.restoreAllData(e.restore).then(()=>{this.ionViewWillEnter(),this.themeService.applyTheme()})}))},{text:e.restoreBackupMerge,cssClass:"secondary",handler:e=>Object(n.a)(this,void 0,void 0,(function*(){yield this.storageService.restoreAllData(e.restore,!0).then(()=>{this.ionViewWillEnter(),this.themeService.applyTheme()})}))}]});yield t.present()}))}copyTextToClipboard(e){const t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}showHelpTextsInOverview(){return Object(n.a)(this,void 0,void 0,(function*(){this.retrievedSettings.hideOverviewHelperTextGeneral=!1,this.retrievedSettings.hideOverviewHelperTextMenuBar=!1,this.storageService.saveSettingsToStorage(this.retrievedSettings),this.router.navigate(["tabs/overview"])}))}}return e.\u0275fac=function(t){return new(t||e)(b.Hb(r.a),b.Hb(l.a),b.Hb(h.a),b.Hb(S.a),b.Hb(T.d),b.Hb(r.K),b.Hb(d),b.Hb(o.g))},e.\u0275cmp=b.Bb({type:e,selectors:[["app-tab-settings"]],decls:77,vars:65,consts:[[3,"translucent"],[3,"fullscreen"],[3,"formGroup"],[1,"list-header"],["name","forceDarkMode","formControlName","forceDarkMode","slot","end"],["name","currency","formControlName","currency",3,"cancelText","okText"],[4,"ngFor","ngForOf"],["name","dateFormat","formControlName","dateFormat",3,"cancelText","okText"],["button","",3,"click"],["position","floating"],["type","number","name","notificationBeforeCancelationPeriodInDays","formControlName","notificationBeforeCancelationPeriodInDays"],[3,"value"]],template:function(e,t){1&e&&(b.Mb(0,"ion-header",0),b.Mb(1,"ion-toolbar"),b.Mb(2,"ion-title"),b.mc(3),b.Xb(4,"translate"),b.Lb(),b.Lb(),b.Lb(),b.Mb(5,"ion-content",1),b.Mb(6,"form",2),b.Mb(7,"ion-list"),b.Mb(8,"ion-list-header",3),b.mc(9),b.Xb(10,"translate"),b.Lb(),b.Mb(11,"ion-item"),b.Mb(12,"ion-label"),b.Mb(13,"h2"),b.mc(14),b.Xb(15,"translate"),b.Lb(),b.Mb(16,"ion-note"),b.mc(17),b.Xb(18,"translate"),b.Lb(),b.Lb(),b.Ib(19,"ion-checkbox",4),b.Lb(),b.Mb(20,"ion-item"),b.Mb(21,"ion-label"),b.mc(22),b.Xb(23,"translate"),b.Lb(),b.Mb(24,"ion-select",5),b.Xb(25,"translate"),b.Xb(26,"translate"),b.kc(27,E,3,2,"ng-container",6),b.Lb(),b.Lb(),b.Mb(28,"ion-item"),b.Mb(29,"ion-label"),b.mc(30),b.Xb(31,"translate"),b.Lb(),b.Mb(32,"ion-select",7),b.Xb(33,"translate"),b.Xb(34,"translate"),b.kc(35,p,3,2,"ng-container",6),b.Lb(),b.Lb(),b.Mb(36,"ion-item",8),b.Ub("click",(function(){return t.showHelpTextsInOverview()})),b.Mb(37,"ion-label"),b.Mb(38,"h2"),b.mc(39),b.Xb(40,"translate"),b.Lb(),b.Mb(41,"ion-note"),b.mc(42),b.Xb(43,"translate"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(44,"ion-list"),b.Mb(45,"ion-list-header",3),b.mc(46),b.Xb(47,"translate"),b.Lb(),b.Mb(48,"ion-item"),b.Mb(49,"ion-label",9),b.mc(50),b.Xb(51,"translate"),b.Lb(),b.Ib(52,"ion-input",10),b.Lb(),b.Lb(),b.Mb(53,"ion-list"),b.Mb(54,"ion-list-header",3),b.mc(55),b.Xb(56,"translate"),b.Lb(),b.Mb(57,"ion-item",8),b.Ub("click",(function(){return t.showLicense()})),b.Mb(58,"ion-label"),b.mc(59),b.Xb(60,"translate"),b.Lb(),b.Lb(),b.Mb(61,"ion-item",8),b.Ub("click",(function(){return t.showAbout()})),b.Mb(62,"ion-label"),b.mc(63),b.Xb(64,"translate"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(65,"ion-list"),b.Mb(66,"ion-list-header",3),b.mc(67),b.Xb(68,"translate"),b.Lb(),b.Mb(69,"ion-item",8),b.Ub("click",(function(){return t.backup()})),b.Mb(70,"ion-label"),b.mc(71),b.Xb(72,"translate"),b.Lb(),b.Lb(),b.Mb(73,"ion-item",8),b.Ub("click",(function(){return t.restore()})),b.Mb(74,"ion-label"),b.mc(75),b.Xb(76,"translate"),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&e&&(b.dc("translucent",!0),b.xb(3),b.oc(" ",b.Yb(4,25,"TABS.SETTINGS.SETTINGS")," "),b.xb(2),b.dc("fullscreen",!0),b.xb(1),b.dc("formGroup",t.settingsForm),b.xb(3),b.oc(" ",b.Yb(10,27,"TABS.SETTINGS.UI")," "),b.xb(5),b.nc(b.Yb(15,29,"TABS.SETTINGS.DARK_MODE")),b.xb(3),b.nc(b.Yb(18,31,"TABS.SETTINGS.DARK_MODE_HELPER")),b.xb(5),b.nc(b.Yb(23,33,"TABS.SETTINGS.CURRENCY")),b.xb(2),b.ec("cancelText",b.Yb(25,35,"GENERAL.CANCEL")),b.ec("okText",b.Yb(26,37,"GENERAL.OK")),b.xb(3),b.dc("ngForOf",t.currencyList),b.xb(3),b.nc(b.Yb(31,39,"TABS.SETTINGS.DATE_FORMAT")),b.xb(2),b.ec("cancelText",b.Yb(33,41,"GENERAL.CANCEL")),b.ec("okText",b.Yb(34,43,"GENERAL.OK")),b.xb(3),b.dc("ngForOf",t.dateFormatList),b.xb(4),b.nc(b.Yb(40,45,"TABS.SETTINGS.SHOW_HELP_TEXTS_IN_OVERVIEW")),b.xb(3),b.nc(b.Yb(43,47,"TABS.SETTINGS.SHOW_HELP_TEXTS_IN_OVERVIEW_HELPER")),b.xb(4),b.oc(" ",b.Yb(47,49,"TABS.SETTINGS.TEMPLATES")," "),b.xb(4),b.nc(b.Yb(51,51,"TABS.SETTINGS.NOTIFICATION_BEFORE_CANCELATION_PERIOD_IN_DAYS")),b.xb(5),b.oc(" ",b.Yb(56,53,"TABS.SETTINGS.GENERAL_INFORMATION")," "),b.xb(4),b.nc(b.Yb(60,55,"TABS.SETTINGS.LICENSE")),b.xb(4),b.nc(b.Yb(64,57,"TABS.SETTINGS.ABOUT")),b.xb(4),b.oc(" ",b.Yb(68,59,"TABS.SETTINGS.DATA_MANAGEMENT")," "),b.xb(4),b.nc(b.Yb(72,61,"TABS.SETTINGS.BACKUP")),b.xb(4),b.nc(b.Yb(76,63,"TABS.SETTINGS.RESTORE")))},directives:[r.o,r.F,r.E,r.k,l.l,l.h,l.c,r.t,r.u,r.r,r.s,r.v,r.h,r.b,l.g,l.b,r.z,r.L,s.k,r.q,r.J,r.A],pipes:[T.c],styles:[""]}),e})()}];let m=(()=>{class e{}return e.\u0275mod=b.Fb({type:e}),e.\u0275inj=b.Eb({factory:function(t){return new(t||e)},imports:[[o.i.forChild(A)],o.i]}),e})(),g=(()=>{class e{}return e.\u0275mod=b.Fb({type:e}),e.\u0275inj=b.Eb({factory:function(t){return new(t||e)},providers:[d],imports:[[r.G,s.b,m,l.d,l.j,T.b]]}),e})()}}]);