(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"28dC":function(e,t,s){"use strict";s.r(t),s.d(t,"DataManagementPageModule",function(){return u});var r=s("ofXK"),a=s("3Pt+"),i=s("TEn/"),c=s("tyNb"),o=s("mrSG"),n=s("fXoL"),l=s("8znc"),b=s("/Xhy"),d=s("sYmb");const h=[{path:"",component:(()=>{class e{constructor(e,t,s,r,a){this.alertController=e,this.storageService=t,this.themeService=s,this.translateService=r,this.platform=a}ngOnInit(){}backup(){return Object(o.a)(this,void 0,void 0,function*(){this.platform.ready().then(()=>{this.platform.is("android")?this.storageService.backupAllDataAndroid():this.platform.is("mobileweb")&&this.backupWeb()})})}backupWeb(){return Object(o.a)(this,void 0,void 0,function*(){const e={};this.translateService.get("GENERAL.CANCEL").subscribe(t=>{e.cancel=t}),this.translateService.get("TABS.SETTINGS.BACKUP").subscribe(t=>{e.header=t}),this.translateService.get("TABS.SETTINGS.COPY_TO_CLIPBOARD").subscribe(t=>{e.copyToClipboard=t});const t=yield this.alertController.create({cssClass:"alert-full-width",header:e.header,message:yield this.storageService.getAllData(),buttons:[{text:e.cancel,role:"cancel",cssClass:"secondary"},{text:e.copyToClipboard,cssClass:"secondary",handler:()=>Object(o.a)(this,void 0,void 0,function*(){this.copyTextToClipboard(yield this.storageService.getAllData())})}]});yield t.present()})}restore(){return Object(o.a)(this,void 0,void 0,function*(){this.platform.ready().then(()=>{this.platform.is("android")?this.restoreAndroid():this.platform.is("mobileweb")&&this.restoreWeb()})})}restoreAndroid(){return Object(o.a)(this,void 0,void 0,function*(){const e={};this.translateService.get("TABS.SETTINGS.RESTORE").subscribe(t=>{e.header=t}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_ALERT_MESSAGE").subscribe(t=>{e.message=t}),this.translateService.get("GENERAL.CANCEL").subscribe(t=>{e.cancel=t}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_REPLACE").subscribe(t=>{e.restoreBackupReplace=t}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_MERGE").subscribe(t=>{e.restoreBackupMerge=t});const t=yield this.alertController.create({cssClass:"alert-full-width",header:e.header,message:e.message,buttons:[{text:e.cancel,role:"cancel",cssClass:"secondary"},{text:e.restoreBackupReplace,handler:()=>{this.storageService.restoreAllDataAndroid().then(()=>{this.themeService.applyTheme()})}},{text:e.restoreBackupMerge,handler:()=>{this.storageService.restoreAllDataAndroid(!0).then(()=>{this.themeService.applyTheme()})}}]});yield t.present()})}restoreWeb(){return Object(o.a)(this,void 0,void 0,function*(){const e={};this.translateService.get("TABS.SETTINGS.RESTORE").subscribe(t=>{e.header=t}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_ALERT_MESSAGE").subscribe(t=>{e.message=t}),this.translateService.get("GENERAL.CANCEL").subscribe(t=>{e.cancel=t}),this.translateService.get("TABS.SETTINGS.BACKUP_DATA").subscribe(t=>{e.backupData=t}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_REPLACE").subscribe(t=>{e.restoreBackupReplace=t}),this.translateService.get("TABS.SETTINGS.RESTORE_BACKUP_MERGE").subscribe(t=>{e.restoreBackupMerge=t});const t=yield this.alertController.create({cssClass:"alert-full-width",header:e.header,message:e.message,inputs:[{name:"restore",type:"textarea",placeholder:e.backupData}],buttons:[{text:e.cancel,role:"cancel",cssClass:"secondary"},{text:e.restoreBackupReplace,cssClass:"secondary",handler:e=>Object(o.a)(this,void 0,void 0,function*(){yield this.storageService.restoreAllData(e.restore).then(()=>{this.themeService.applyTheme()})})},{text:e.restoreBackupMerge,cssClass:"secondary",handler:e=>Object(o.a)(this,void 0,void 0,function*(){yield this.storageService.restoreAllData(e.restore,!0).then(()=>{this.themeService.applyTheme()})})}]});yield t.present()})}copyTextToClipboard(e){const t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(i.a),n.Jb(l.a),n.Jb(b.a),n.Jb(d.d),n.Jb(i.L))},e.\u0275cmp=n.Db({type:e,selectors:[["app-data-management"]],decls:20,vars:9,consts:[["slot","start"],["routerLink",".."],["slot","icon-only","name","arrow-back"],["button","",3,"click"],["slot","start","name","archive"],["slot","start","name","refresh"]],template:function(e,t){1&e&&(n.Ob(0,"ion-header"),n.Ob(1,"ion-toolbar"),n.Ob(2,"ion-buttons",0),n.Ob(3,"ion-button",1),n.Kb(4,"ion-icon",2),n.Nb(),n.Nb(),n.Ob(5,"ion-title"),n.pc(6),n.Zb(7,"translate"),n.Nb(),n.Nb(),n.Nb(),n.Ob(8,"ion-content"),n.Ob(9,"ion-list"),n.Ob(10,"ion-item",3),n.Wb("click",function(){return t.backup()}),n.Kb(11,"ion-icon",4),n.Ob(12,"ion-label"),n.pc(13),n.Zb(14,"translate"),n.Nb(),n.Nb(),n.Ob(15,"ion-item",3),n.Wb("click",function(){return t.restore()}),n.Kb(16,"ion-icon",5),n.Ob(17,"ion-label"),n.pc(18),n.Zb(19,"translate"),n.Nb(),n.Nb(),n.Nb(),n.Nb()),2&e&&(n.zb(6),n.qc(n.ac(7,3,"TABS.SETTINGS.DATA_MANAGEMENT")),n.zb(7),n.qc(n.ac(14,5,"TABS.SETTINGS.BACKUP")),n.zb(5),n.qc(n.ac(19,7,"TABS.SETTINGS.RESTORE")))},directives:[i.o,i.G,i.e,i.d,i.M,c.i,i.p,i.F,i.k,i.t,i.r,i.s],pipes:[d.c],styles:[""]}),e})()}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Hb({type:e}),e.\u0275inj=n.Gb({imports:[[c.j.forChild(h)],c.j]}),e})(),u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Hb({type:e}),e.\u0275inj=n.Gb({imports:[[r.b,a.d,i.H,S,d.b]]}),e})()}}]);